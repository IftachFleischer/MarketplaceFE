/* ===============================
   THEME TOKENS
   =============================== */
:root {
    --bg: #f7f7f8;

    --panel: #ffffff;
    --panel-muted: #f1f5f9;
    --border: #e5e7eb;

    --text: #0f172a;
    --text-muted: #64748b;

    --accent: #2563eb;
    --accent-hover: #1d4ed8;
    --accent-soft: #eff6ff;

    --danger: #ef4444;
    --danger-hover: #dc2626;
}

/* ===============================
   GLOBAL / LAYOUT
   =============================== */
html,
body,
#root {
    height: 100%;
}

html,
body {
    overflow-x: hidden;
}

body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: Inter, ui-sans-serif, system-ui, "Segoe UI", Roboto, Arial, sans-serif;
}

/* Container helpers */
.container {
    max-width: clamp(320px, 92vw, 1200px);
    margin: 0 auto;
    padding: 0 16px;
}

.container--narrow {
    max-width: 980px;
}

/* ===============================
   NAVBAR (solid dark)
   =============================== */
.navbar {
    position: sticky;
    top: 0;
    z-index: 100;
    background: #000;
    /* dark header */
    color: #fff;
    border-bottom: 1px solid #222;
}

.navbar-inner {
    max-width: 1200px;
    margin: 0 auto;
    padding: 10px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
}

.nav-left {
    display: flex;
    align-items: center;
    gap: 10px;
}

.brand {
    font-weight: 800;
    font-size: 1.2rem;
    color: #fff;
    text-decoration: none;
}

.navbar-logo {
    height: 72px;
    /* doubled from 36px */
    width: auto;
    display: block;
    object-fit: contain;
    image-rendering: -webkit-optimize-contrast;
    /* crisper rendering on retina */
}

.navbar-logo:hover {
    opacity: .85;
    transition: opacity .2s ease;
}

.nav-links {
    display: flex;
    align-items: center;
    gap: 18px;
}

.nav-links a {
    color: #fff;
    text-decoration: none;
    font-weight: 500;
    padding: 6px 10px;
    border-radius: 10px;
    transition: .2s ease;
}

.nav-links a:hover,
.nav-links a.active {
    background: #111;
    color: #fff;
}

.nav-actions,
.nav-right {
    display: flex;
    align-items: center;
    gap: 10px;
}

.user-chip {
    color: #e5e7eb;
    font-size: .92rem;
    white-space: nowrap;
}

@media (max-width:640px) {
    .nav-links {
        gap: 12px;
        overflow-x: auto;
    }

    .user-chip {
        display: none;
    }
}

/* ===============================
   BUTTONS (unified blue)
   =============================== */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 8px 14px;
    border-radius: 10px;
    border: 1px solid transparent;
    font-weight: 500;
    cursor: pointer;
    transition: .2s ease;
}

/* All primary actions are blue */
.btn-primary,
.btn-ghost {
    background: var(--accent);
    color: #fff;
    border: 1px solid var(--accent);
}

.btn-primary:hover,
.btn-ghost:hover {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
    color: #fff;
}

/* Destructive */
.btn-danger {
    background: var(--danger);
    color: #fff;
}

.btn-danger:hover {
    background: var(--danger-hover);
}

/* ===============================
   GENERIC CARDS / PANELS
   =============================== */
.card {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 14px;
    box-shadow: 0 1px 3px rgba(15, 23, 42, .06);
    transition: transform .15s ease, box-shadow .15s ease;
}

.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(15, 23, 42, .08);
}

/* Utilities */
.muted {
    color: var(--text-muted);
}

/* ===============================
   PRODUCT GRID & CARDS
   =============================== */
.p-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 16px;
}

/* Card is a vertical flex column so the footer can stick to the bottom */
.p-card {
    display: flex;
    flex-direction: column;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 14px;
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
    box-shadow: 0 1px 3px rgba(15, 23, 42, .06);
}

.p-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(15, 23, 42, .08);
    border-color: #dde2ea;
}

/* Top media block (square) */
.p-card__media {
    position: relative;
    width: 100%;
    aspect-ratio: 1 / 1;
    background: #f3f4f6;
}

.p-card__media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

/* SOLD badge */
.p-badge {
    position: absolute;
    left: 8px;
    top: 8px;
    font-size: 12px;
    font-weight: 700;
    padding: 4px 8px;
    border-radius: 999px;
    backdrop-filter: blur(4px);
    background: #111;
    color: #fff;
}

/* Body content (column). Footer pushes to bottom with margin-top:auto */
.p-card__body {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    min-height: 120px;
    /* gives space for title & chips */
}

.p-card__row {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 8px;
}

.p-title {
    margin: 0;
    font-size: 15px;
    line-height: 1.25;
    font-weight: 600;
    color: var(--text);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.p-price {
    white-space: nowrap;
    font-weight: 700;
    color: var(--text);
}

/* Chips — reserve height even if empty to keep rows even */
.p-meta {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    min-height: 28px;
}

.p-chip {
    font-size: 12px;
    padding: 4px 8px;
    border: 1px solid var(--border);
    border-radius: 999px;
    background: #fff;
    color: var(--text);
}

.p-chip--muted {
    background: #f8fafc;
    color: #475569;
}

/* Footer (CTA) — **always visible** and fixed at card bottom */
.p-card__footer {
    margin-top: auto;
    /* key line: pushes to bottom */
    display: block;
}

.p-card__cta {
    width: 100%;
}

/* full-width button */

/* Home header */
.home-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin: 4px 0 14px;
}

.home-head h2 {
    margin: 0;
}

/* ===============================
   AUTH SCREENS (login/signup)
   =============================== */
.auth-shell {
    min-height: calc(100vh - 64px);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px 16px;
    background: var(--bg);
    box-sizing: border-box;
}

.auth-card {
    width: 100%;
    max-width: 420px;
    padding: 20px;
    border-radius: 16px;
    background: var(--panel);
    border: 1px solid var(--border);
    box-shadow: 0 6px 20px rgba(0, 0, 0, .08);
    transition: transform .2s ease, box-shadow .2s ease;
}

.auth-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 28px rgba(0, 0, 0, .12);
}

.auth-card * {
    box-sizing: border-box;
}

.auth-head h2 {
    margin: 0 0 4px;
    font-size: 22px;
    line-height: 1.25;
}

.auth-head p {
    margin: 0 0 12px;
}

.auth-banner {
    background: var(--accent-soft);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 10px 12px;
    margin-bottom: 12px;
}

.auth-error {
    background: #fee2e2;
    color: #991b1b;
    border: 1px solid #fecaca;
    border-radius: 10px;
    padding: 10px 12px;
    margin-bottom: 12px;
}

.auth-form {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.auth-label {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 6px;
    display: block;
}

.auth-input {
    width: 100%;
    border: 1px solid var(--border);
    background: #fff;
    border-radius: 10px;
    padding: 10px 12px;
    outline: none;
}

.auth-input:focus {
    border-color: #cbd5e1;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, .12);
}

.auth-input-wrap {
    position: relative;
}

.auth-eye {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    background: transparent;
    border: none;
    cursor: pointer;
    font-size: 16px;
    line-height: 1;
}

.auth-grid {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
    gap: 10px;
}

@media (max-height:600px) {
    .auth-shell {
        align-items: flex-start;
        padding-top: 60px;
    }
}

.auth-foot {
    margin-top: 12px;
    text-align: center;
}

/* ===== Product Details layout (refined) ===== */
.pd-grid {
    display: grid;
    grid-template-columns: minmax(0, 1fr) 380px;
    gap: 24px;
    align-items: start;
}

/* Left column — card with centered square stage */
.pd-media {
    padding: 16px;
}

/* constrain the stage so it doesn't feel gigantic on wide monitors */
.pd-media__main {
    width: 100%;
    max-width: 720px;
    /* <- cap the size */
    margin: 0 auto;
    /* <- center inside the card */
    aspect-ratio: 1 / 1;
    background: #f3f4f6;
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
}

.pd-media__img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    /* keep quality, no crop */
    object-position: center;
    /* center the product */
    display: block;
}

/* thumbs strip */
.pd-thumbs {
    margin: 12px auto 0;
    max-width: 720px;
    /* align with main stage width */
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(64px, 1fr));
    gap: 8px;
}

.pd-thumb {
    padding: 0;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: #fff;
    cursor: pointer;
    height: 72px;
    overflow: hidden;
}

.pd-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.pd-thumb.is-active {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    border-color: var(--accent);
    background: var(--accent-soft);
}

/* Right column — details card */
.pd-side {
    padding: 16px;
}

/* make the details panel stick on large screens */
@media (min-width: 981px) {
    .pd-side {
        position: sticky;
        top: 92px;
        /* sit below the navbar */
        align-self: start;
    }
}

/* stack cleanly on small screens */
@media (max-width: 980px) {
    .pd-grid {
        grid-template-columns: 1fr;
        gap: 16px;
    }

    .pd-thumbs {
        max-width: none;
    }
}

/* Make cards in each grid row equal height */
.p-grid {
    align-items: stretch;
}

/* Ensure the card body has enough height so the footer
   can consistently sit at the bottom */
.p-card__body {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    min-height: 180px;
    /* ↑ bump this if you add more chips/lines */
}

/* Title: always reserve exactly two lines of space */
.p-title {
    margin: 0;
    font-size: 15px;
    line-height: 1.3;
    font-weight: 600;
    color: var(--text);

    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    /* clamp to two lines */
    overflow: hidden;

    /* Reserve the height of two lines so rows are consistent */
    min-height: calc(1.3em * 2);
}

/* Title/price row has fixed vertical footprint */
.p-card__row {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 8px;

    /* Match the title’s reserved height */
    min-height: calc(1.3em * 2);
}

/* Chips block: keep a stable footprint across cards */
.p-meta {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    min-height: 28px;
    /* already present; keep it */
}

/* Footer (CTA) stays at the bottom of the card body */
.p-card__footer {
    margin-top: auto;
    /* key: pushes footer down */
    display: block;
}

/* ---- Consistent card sizing ---- */
:root {
    /* Tweak these if you want bigger/smaller image blocks */
    --card-media-h: 260px;
    --card-media-h-sm: 220px;
    --card-media-h-lg: 280px;
    --card-cta-h: 40px;
}

/* Grid stretches cards to the same height in each row */
.p-grid {
    align-items: stretch;
}

/* Card: vertical layout */
.p-card {
    display: flex;
    flex-direction: column;
}

/* MEDIA: fixed height instead of aspect-ratio so every card
   starts with the exact same media block size */
.p-card__media {
    position: relative;
    width: 100%;
    height: var(--card-media-h);
    background: #f3f4f6;
    overflow: hidden;
}

@media (max-width: 860px) {
    .p-card__media {
        height: var(--card-media-h-sm);
    }
}

@media (min-width: 1280px) {
    .p-card__media {
        height: var(--card-media-h-lg);
    }
}

.p-card__media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    /* keeps it filled in a uniform way */
    display: block;
}

/* BODY: flex column; footer gets pushed to the bottom */
.p-card__body {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    /* Reserve enough space so tiny titles/chips don't make CTAs jump */
    min-height: 180px;
    /* bump to 190–200 if you add more chips/lines */
}

/* Title: clamp + a reserved two-line footprint */
.p-title {
    margin: 0;
    font-size: 15px;
    line-height: 1.3;
    font-weight: 600;
    color: var(--text);
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    overflow: hidden;
    min-height: calc(1.3em * 2);
}

/* Ensure the title/price row footprint matches the reserved title height */
.p-card__row {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 8px;
    min-height: calc(1.3em * 2);
}

/* Chips block keeps a stable footprint */
.p-meta {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    min-height: 28px;
}

/* FOOTER: pinned to bottom of the body */
.p-card__footer {
    margin-top: auto;
}

/* Button: consistent height so text length doesn't alter layout */
.p-card__cta {
    width: 100%;
    height: var(--card-cta-h);
    line-height: calc(var(--card-cta-h) - 2px);
}

/* Disabled buttons */
.btn:disabled,
.btn[disabled] {
    opacity: 0.6;
    cursor: not-allowed;
    filter: grayscale(0.2);
}

/* ===== Chat Layout ===== */
.chat-shell {
    display: grid;
    grid-template-rows: auto 1fr auto;
    gap: 12px;
    max-width: clamp(320px, 92vw, 1200px);
    margin: 0 auto;
    padding: 8px 0 16px;
}

.chat-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.chat-header__left {
    display: flex;
    align-items: center;
    gap: 10px;
}

.chat-back {
    color: var(--accent);
    text-decoration: none;
    font-weight: 600;
}

.chat-title {
    font-weight: 800;
}

.chat-sub {
    font-size: 0.9rem;
}

.chat-header__right {
    display: flex;
}

/* body: main + aside */
.chat-body {
    display: grid;
    grid-template-columns: minmax(0, 1fr) 340px;
    gap: 16px;
}

@media (max-width: 980px) {
    .chat-body {
        grid-template-columns: 1fr;
    }
}

/* messages panel */
.chat-main {
    padding: 10px;
    min-height: 360px;
    max-height: calc(100vh - 240px);
    overflow-y: auto;
}

/* aside product card */
.chat-aside {
    min-height: 320px;
}

.chat-product__media {
    display: block;
    width: 100%;
    aspect-ratio: 1 / 1;
    background: #f3f4f6;
    border-bottom: 1px solid var(--border);
}

.chat-product__media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.chat-product__body {
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.chat-product__row {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 8px;
}

.chat-product__title {
    font-weight: 700;
    color: var(--text);
    text-decoration: none;
}

.chat-product__title:hover {
    text-decoration: underline;
}

.chat-product__price {
    font-weight: 800;
    white-space: nowrap;
}

.chat-product__chips {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    min-height: 28px;
}

/* composer */
.chat-composer {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 8px;
    align-items: center;
}

.chat-input {
    width: 100%;
    border: 1px solid var(--border);
    background: #fff;
    border-radius: 10px;
    padding: 10px 12px;
    outline: none;
}

.chat-input:focus {
    border-color: #cbd5e1;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.12);
}

/* ===== Compact Chat Bubbles ===== */
.cb {
    display: flex;
    margin: 6px 0;
}

.cb--me {
    justify-content: flex-end;
}

.cb--them {
    justify-content: flex-start;
}

.cb__bubble {
    max-width: min(560px, 78%);
    padding: 8px 10px;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: #ffffff;
    box-shadow: 0 1px 2px rgba(15, 23, 42, .04);
    font-size: 0.95rem;
    line-height: 1.35;
}

.cb--me .cb__bubble {
    background: #e9f3ff;
    border-color: #d6e9ff;
}

.cb__content {
    white-space: pre-wrap;
    word-break: break-word;
}

.cb__meta {
    text-align: right;
    margin-top: 4px;
    opacity: .6;
}

/* ===== Chat Layout (fixed) ===== */
.chat-shell {
    display: grid;
    grid-template-rows: auto 1fr;
    gap: 12px;
    max-width: clamp(320px, 92vw, 1200px);
    margin: 0 auto;
    padding: 8px 0 16px;
    box-sizing: border-box;
}

.chat-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.chat-header__left {
    display: flex;
    align-items: center;
    gap: 10px;
}

.chat-back {
    background: transparent;
    border: none;
    color: var(--accent);
    font-weight: 700;
    cursor: pointer;
}

.chat-title {
    font-weight: 800;
}

.chat-sub {
    font-size: .9rem;
}

/* Body grid: main thread + aside */
.chat-body {
    display: grid;
    grid-template-columns: minmax(0, 720px) 320px;
    grid-template-rows: 1fr auto;
    /* second row is for composer */
    gap: 16px;
}

@media (max-width: 980px) {
    .chat-body {
        grid-template-columns: 1fr;
        grid-template-rows: 1fr auto auto;
        /* main, aside, composer */
    }
}

/* Thread panel */
.chat-main {
    grid-column: 1 / 2;
    padding: 10px;
    min-height: 360px;
    max-height: calc(100vh - 280px);
    overflow-y: auto;
}

/* Product aside */
.chat-aside {
    grid-column: 2 / 3;
}

@media (max-width: 980px) {
    .chat-aside {
        grid-column: 1 / -1;
    }
}

/* Product card (no overlap) */
.chat-product {
    display: flex;
    flex-direction: column;
}

.chat-product__media {
    display: block;
    width: 100%;
    aspect-ratio: 1 / 1;
    background: #f3f4f6;
    border-bottom: 1px solid var(--border);
}

.chat-product__media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.chat-product__body {
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-height: 120px;
    box-sizing: border-box;
}

.chat-product__row {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 8px;
}

.chat-product__title {
    font-weight: 700;
    color: var(--text);
    text-decoration: none;
}

.chat-product__title:hover {
    text-decoration: underline;
}

.chat-product__price {
    font-weight: 800;
    white-space: nowrap;
}

.chat-product__chips {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    min-height: 28px;
}

/* Composer: sits under MAIN only, not full-width */
.chat-composer {
    grid-column: 1 / 2;
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 8px;
    align-items: center;
}

@media (max-width: 980px) {
    .chat-composer {
        grid-column: 1 / -1;
    }
}

.chat-input {
    width: 100%;
    border: 1px solid var(--border);
    background: #fff;
    border-radius: 10px;
    padding: 10px 12px;
    outline: none;
}

.chat-input:focus {
    border-color: #cbd5e1;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.12);
}

/* Compact bubbles */
.cb {
    display: flex;
    margin: 6px 0;
}

.cb--me {
    justify-content: flex-end;
}

.cb--them {
    justify-content: flex-start;
}

.cb__bubble {
    max-width: min(560px, 78%);
    padding: 8px 10px;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: #ffffff;
    box-shadow: 0 1px 2px rgba(15, 23, 42, .04);
    font-size: 0.95rem;
    line-height: 1.35;
}

.cb--me .cb__bubble {
    background: #e9f3ff;
    border-color: #d6e9ff;
}

.cb__content {
    white-space: pre-wrap;
    word-break: break-word;
}

.cb__meta {
    text-align: right;
    margin-top: 4px;
    opacity: .6;
}

/* --- Chat polish: fix button overflow & sizing --- */
.chat-product {
    /* clip children to the rounded card */
    overflow: hidden;
    border-radius: 14px;
    /* matches .card */
}

.chat-product__body {
    padding: 12px;
    display: flex;
    flex-direction: column;
}

.chat-product .btn {
    width: 100%;
    box-sizing: border-box;
    /* avoid spilling past padding */
    margin-top: auto;
    /* stick to bottom of the body */
    border-radius: 10px;
}

/* Keep media edge crisp against body */
.chat-product__media {
    border-bottom: 1px solid var(--border);
}

/* Composer sizing so the Send button doesn't “bulge” */
.chat-composer {
    padding-top: 4px;
}

.chat-input {
    height: 40px;
}

.chat-composer .btn {
    height: 40px;
    padding: 0 16px;
    line-height: 1;
    /* centers label nicely */
}

.chat-body {
    grid-template-columns: minmax(0, 700px) 308px;
    /* was 720 / 320 */
}

/* --- Final composer alignment fix --- */
.chat-composer {
    grid-template-columns: 1fr auto;
    gap: 8px;
    align-items: stretch;
    /* ensures both are equal height */
    padding-top: 4px;
}

.chat-input {
    height: 44px;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: #fff;
    padding: 0 12px;
    font-size: 0.95rem;
    box-sizing: border-box;
}

.chat-composer .btn {
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
    padding: 0 20px;
    box-sizing: border-box;
}